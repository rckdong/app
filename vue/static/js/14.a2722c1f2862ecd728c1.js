webpackJsonp([14],{"7ojG":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("aA9S"),i=a.n(o),n=a("4YfN"),l=a.n(n),r=a("9rMa"),s=a("Du/2"),c=a("4YDf"),d=a("ucOY"),u=a("NBJj"),p=a("xaJ4"),h=(a("0NQ/"),a("JuB6")),f=a("TVnW"),m=a("8+FI"),_={components:{List:c.a,FormDialog:d.a,ShowContract:u.a,showBudge:h.a,UpdateContract:p.a},computed:l()({},Object(r.c)(["global"])),filters:i()({},f.a),watch:{"global.notify":{deep:!0,handler:function(t,e){var a=this,o=this.$store.state.global.notify.slice();t.map(function(t,e){switch(a.currentId=t.value,t.action){case"PreviewContract":a.previewVisible=!0,a.updateVisible=!1;break;case"updateContract":a.previewVisible=!1,a.updateVisible=!0}o.splice(e,1),a.NOTIFY(o)})}}},data:function(){var t=this;return{previewVisible:!1,showBudgeVisible:!1,updateVisible:!1,currentId:"",userInfo:{id:"",name:"",username:"",money:0,qq:"",mail:"",phone:"",desc:"",job:"",leader:""},activeNames:["1"],searchPros:{keyWord:{isRequire:!1,isNeedInput:!1},searchForm:[{phone:""}]},formDialog:{withdrawLogDetail:{title:'<i class="el-icon-view"></i>&nbsp;提现记录',titleSalting:!1,form:[{id:""}],onClose:function(e){t.formDialog.withdrawLogDetail.visible=!1,t.formDialog.withdrawLogDetail.form=[{id:""}],t.LOADING_BTN("")},submit:function(e){return t.formDialog.withdrawLogDetail.visible=!1},visible:!1}},tableProps:[{tableData:[],currentPage:1,method:"post",getTabData:function(e){return t.$HTTP.marketMyRewardList(e)},operatorWidth:195,field:["手机号码","合同编号"],fieldMax:3,checkedField:[],checkedFieldCallback:function(e){t.tableProps[0].checkedField=e}}],withdrawLogData:[]}},methods:l()({},Object(r.b)([s.a,s.d,s.b]),{onActionComplete:function(){this.LOADING_BTN("")},onContractClose:function(t){this.previewVisible=!1,this.showBudgeVisible=!1,this.currentId="",t&&this.RESPONSE_END("")},withdraw:function(){var t=this;this.LOADING_BTN("withdraw"),this.$prompt("请输入提现金额，提现收取手续费 3.26%,上级收取10% ","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+(\.\d+)?$/,inputErrorMessage:"请输入正确的金额"}).then(function(e){var a=e.value;a&&t.$HTTP.marketDoWithdraw({apply_money:a}).then(function(e){m.a.notify("申请提现已提交"),t.LOADING_BTN(""),t.RESPONSE_END({cancelLoadingBtn:!0})}).catch(function(e){t.LOADING_BTN("")})}).catch(function(){t.LOADING_BTN("")})},withdrawLog:function(){var t=this;this.LOADING_BTN("withdraw_log"),this.$HTTP.userWithdrawLog({}).then(function(e){t.withdrawLogData=e.data.data,t.formDialog.withdrawLogDetail.visible=!0}).catch(function(e){t.LOADING_BTN("")})},openDetail:function(t){this.currentId=t.contacts_id+"",this.previewVisible=!0},showBudge:function(t){window.open(this.$CONSTANT.rootUrl+"index.php/api/contacts/settlement.html?id="+t.contacts_id)},withdrawForm:function(t){var e=this,a=t;this.$HTTP.marketApplyWithdraw({id:a}).then(function(t){m.a.notify(t.data.message,"success"),e.RESPONSE_END("")}).catch(function(t){m.a.notify("申请失败","warning"),e.RESPONSE_END("")})},isDisableExitBtn:function(t){return 0!=t.is_cancel&&3!=t.is_cancel},indexMethod:function(t){return t+1}}),mounted:function(){var t=this;this.$HTTP.globalGetInfo({}).then(function(e){t.userInfo=e.data.data}).catch(function(t){})}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("List",{attrs:{searchPros:t.searchPros,tableProps:t.tableProps,refresh:t.global.refreshTime,response:t.global.responseEnd}},[a("el-collapse",{staticStyle:{border:"none"},attrs:{slot:"desc"},slot:"desc",model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("el-collapse-item",{attrs:{name:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"header-icon el-icon-info"}),t._v(" 我的账户\n                ")]),t._v(" "),a("div",{staticClass:"myAccount"},[a("ul",[a("li",[t._v("用户名：\n                            "),a("el-tag",[t._v(t._s(t.userInfo.name))])],1),t._v(" "),a("li",{staticStyle:{"margin-right":"40px"}},[t._v("余额：\n                            "),a("el-tag",[a("span",[t._v(t._s(t.$options.filters.filterCNYFormatting(t.userInfo.money)))])]),t._v(" "),a("el-button",{attrs:{loading:"withdraw"==t.global.loadingBtn,icon:"el-icon-bell",type:"primary"},on:{click:t.withdraw}},[t._v("申请提现")]),t._v(" "),a("el-button",{attrs:{loading:"withdraw_log"==t.global.loadingBtn,icon:"el-icon-bell",type:"primary"},on:{click:t.withdrawLog}},[t._v("提现记录")])],1),t._v(" "),a("li",[t._v("职位：\n                            "),a("el-tag",[t._v(t._s(t.userInfo.leader))])],1),t._v(" "),a("li",[t._v("手机号码：\n                            "),a("el-tag",[t._v(t._s(t.userInfo.phone))])],1)])])],2)],1),t._v(" "),a("el-breadcrumb",{attrs:{slot:"breadcrumb",separator:"/"},slot:"breadcrumb"},[a("el-breadcrumb-item",[t._v("销售经理人")]),t._v(" "),a("el-breadcrumb-item",[t._v("销售主页面")]),t._v(" "),a("el-breadcrumb-item",[t._v("账户")])],1),t._v(" "),a("template",{slot:"searchContainer"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"手机号码"},model:{value:t.searchPros.searchForm[0].phone,callback:function(e){t.$set(t.searchPros.searchForm[0],"phone",e)},expression:"searchPros.searchForm[0].phone"}}),t._v(" "),a("el-input",{staticClass:"hide",attrs:{placeholder:"默认搜索条件"},model:{value:t.searchPros.searchForm[0].status,callback:function(e){t.$set(t.searchPros.searchForm[0],"status",e)},expression:"searchPros.searchForm[0].status"}})],1),t._v(" "),a("template",{slot:"tableField"},[t.tableProps[0].deleteMulti?a("el-table-column",{attrs:{type:"selection",width:"55"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{align:"center",type:"index",index:t.indexMethod}}),t._v(" "),-1!=t.tableProps[0].checkedField.indexOf("合同编号")?a("el-table-column",{attrs:{prop:"contract_number",align:"center",width:"205",label:"合同编号"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{align:"center",width:"120",label:"合同类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{domProps:{innerHTML:t._s(t.$options.filters.filterContractType(e.row.contract_type))}})]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"客户名",width:"105"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(" "+t._s(e.row.nickname))])]}}])}),t._v(" "),-1!=t.tableProps[0].checkedField.indexOf("手机号码")?a("el-table-column",{attrs:{prop:"phone",align:"center",label:"手机号码",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(" "+t._s(e.row.phone))])]}}])}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"brand_name",width:"120",align:"center",label:"品牌"}}),t._v(" "),a("el-table-column",{attrs:{prop:"car_model",width:"250",align:"center",label:"车型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"guidance_price",align:"center",label:"指导价格"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"成交价",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t.$options.filters.filterCNYFormatting(e.row.transaction_price)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"佣金",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t.$options.filters.filterCNYFormatting(e.row.reward)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"提现状态",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{domProps:{innerHTML:t._s(t.$options.filters.filterMarketWithdrawStatus(e.row.is_withdraw_ok))}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"withdraw_desc",align:"center",label:"提现结果"}})],1),t._v(" "),a("template",{slot:"action"},[a("el-table-column",{attrs:{align:"center",width:"400",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.openDetail(e.row)}}},[t._v("查看合同")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.showBudge(e.row)}}},[t._v("查看明细")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.withdrawForm(e.row.contacts_id)}}},[t._v("申请提现到余额")])]}}])})],1)],2),t._v(" "),t.showBudgeVisible?a("showBudge",{attrs:{dialogVisible:t.showBudgeVisible,id:t.currentId},on:{complete:t.onActionComplete,onContractClose:t.onContractClose}}):t._e(),t._v(" "),t.previewVisible?a("ShowContract",{attrs:{id:t.currentId},on:{complete:t.onActionComplete,onContractClose:t.onContractClose}}):t._e(),t._v(" "),t.updateVisible?a("UpdateContract",{attrs:{id:t.currentId,isUpdate:!0},on:{complete:t.onActionComplete,onContractClose:t.onContractClose}}):t._e(),t._v(" "),a("FormDialog",{attrs:{visible:t.formDialog.withdrawLogDetail.visible,form:t.formDialog.withdrawLogDetail.form,rules:t.formDialog.withdrawLogDetail.rules,submitData:t.formDialog.withdrawLogDetail.submit,title:t.formDialog.withdrawLogDetail.title,titleSalting:t.formDialog.withdrawLogDetail.titleSalting,width:"61rem"},on:{onClose:t.formDialog.withdrawLogDetail.onClose}},[a("template",{slot:"formElements"},[a("span",{staticClass:"dialog-footer",staticStyle:{position:"absolute",right:"23px",top:"10px"}},[a("el-button",{attrs:{icon:"el-icon-circle-close",round:""},on:{click:t.formDialog.withdrawLogDetail.onClose}},[t._v("关闭")])],1),t._v(" "),a("el-table",{staticStyle:{width:"62rem","margin-top":"-20px"},attrs:{data:t.withdrawLogData,stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",index:t.indexMethod}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"申请金额",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.omoney))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"实际到账金额",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.money))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"提现申请时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{domProps:{innerHTML:t._s(t.$options.filters.filterDate(e.row.create_at))}})]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"备注",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.desc))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"提现状态",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{domProps:{innerHTML:t._s(t.$options.filters.filterWithdrawStatus(e.row.status))}})]}}])})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],2)],1)},staticRenderFns:[]};var w=a("vSla")(_,b,!1,function(t){a("jkUk")},"data-v-6b66d1fb",null);e.default=w.exports},jkUk:function(t,e){}});