webpackJsonp([12],{CDP9:function(e,t){},DmsW:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("KH7x"),n=r.n(o),a=r("aA9S"),i=r.n(a),s=r("4YfN"),l=r.n(s),c=r("8+FI"),d=r("9rMa"),p=r("Du/2"),u=r("4YDf"),m=r("ucOY"),b=r("NBJj"),h=r("xaJ4"),f=r("TVnW"),v={name:"unFinishList",components:{List:u.a,ShowContract:b.a,UpdateContract:h.a,FormDialog:m.a},computed:l()({},Object(d.c)(["global"])),watch:{"global.notify":{deep:!0,handler:function(e,t){var r=this;console.log("global.notify发生变化"),this.$refs.actionNode.innerHTML='<i class="el-icon-loading"></i>请稍后...';var o=this.$store.state.global.notify.slice();e.map(function(e,t){switch(e.action){case"PreviewContract":r.currentId=e.value,r.previewVisible=!0,r.updateVisible=!1,o.splice(t,1),r.NOTIFY(o);break;case"updateContract":r.currentId=e.value,r.previewVisible=!1,r.updateVisible=!0,o.splice(t,1),r.NOTIFY(o)}})}}},filters:i()({},f.a),data:function(){var e=this;return{searchPros:{keyWord:{isRequire:!1,isNeedInput:!1},searchForm:[{phone:""}]},formDialog:{exitOrder:{title:"申请退单",titleSalting:!1,rules:{type:[{required:!0,message:"请选择退单类型",trigger:"change"}],cancel_desc:[{validator:function(t,r,o){var n=e.formDialog.exitOrder.form[0],a=n.type,i=n.cancel_desc;if("其他原因"==a&&""==i)return o(new Error("请输入退订原因"));o()},trigger:"blur"}]},form:[{id:"",cancel_desc:"",type:"",typeOptions:[]}],onClose:function(t){e.formDialog.exitOrder.visible=!1,e.formDialog.exitOrder.form=[{id:"",desc:"",type:"",typeOptions:[]}],t&&e.RESPONSE_END({cancelLoadingBtn:!0})},submit:function(t){return e.$HTTP.marketSubmitCancelExit(t)},visible:!1}},tableProps:[{tableData:[],currentPage:1,method:"get",getTabData:function(t){return e.$HTTP.clerkContactsList(t)},operatorWidth:195,field:["创建时间","手机号码","订车日期"],fieldMax:3,checkedField:[],checkedFieldCallback:function(t){e.tableProps[0].checkedField=t}}],previewVisible:!1,updateVisible:!1,currentId:-1}},methods:l()({},Object(d.b)([p.a,p.d,p.b]),{onActionComplete:function(){this.$refs.actionNode.innerHTML='<i class="el-icon-setting"></i>&nbsp;操作选项'},onContractClose:function(e){this.$refs.actionNode.innerHTML='<i class="el-icon-setting"></i>&nbsp;操作选项',this.previewVisible=!1,this.updateVisible=!1,this.currentId="",e&&this.RESPONSE_END("")},handleCommand:function(e){var t=this,r=e.split("_"),o=n()(r,2),a=o[0],i=o[1];switch(this.currentId=i,this.$refs.actionNode.innerHTML='<i class="el-icon-loading"></i>请稍后...',a){case"preview":this.previewVisible=!0;break;case"upload":this.$router.push({path:"/datumUpload",query:{id:this.currentId,d:(new Date).getTime()}});break;case"action":this.$confirm('您确认将当前合同转为转定车合同吗?<br /><span style="font-size: 12px" class="dangerColor">(此操作不可恢复，请谨慎操作)</span>',"温馨提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then(function(e){t.$HTTP.marketChangeContractType({id:i}).then(function(e){c.a.notify("转定车合同成功","success"),t.RESPONSE_END("")}).catch(function(e){c.a.notify("转定车合同失败,请稍后再试","warning")})}).catch(function(){})}},openExitForm:function(e){var t=this;this.formDialog.exitOrder.form[0].id=e,this.$HTTP.marketCancelExitDesc({id:e}).then(function(e){t.formDialog.exitOrder.form[0].typeOptions=e.data.data,t.formDialog.exitOrder.visible=!0,t.RESPONSE_END({cancelLoadingBtn:!0})})},indexMethod:function(e){return e+1}})},_={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("List",{attrs:{searchPros:e.searchPros,tableProps:e.tableProps,refresh:e.global.refreshTime,response:e.global.responseEnd}},[r("el-breadcrumb",{attrs:{slot:"breadcrumb",separator:"/"},slot:"breadcrumb"},[r("el-breadcrumb-item",[e._v("销售文员")]),e._v(" "),r("el-breadcrumb-item",[r("span",{staticClass:"defaultColor"},[e._v("文员主页")])])],1),e._v(" "),r("template",{slot:"searchContainer"},[r("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"客户姓名"},model:{value:e.searchPros.searchForm[0].phone,callback:function(t){e.$set(e.searchPros.searchForm[0],"phone",t)},expression:"searchPros.searchForm[0].phone"}}),e._v(" "),r("el-input",{staticClass:"hide",attrs:{placeholder:"默认搜索条件"},model:{value:e.searchPros.searchForm[0].status,callback:function(t){e.$set(e.searchPros.searchForm[0],"status",t)},expression:"searchPros.searchForm[0].status"}}),e._v(" "),r("el-dropdown",{attrs:{"hide-on-click":!1,trigger:"click"}},[r("el-button",{attrs:{type:"primary"}},[e._v("\n                    更多选项"),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown","hide-on-click":!1},slot:"dropdown"},[r("el-dropdown-item",{staticClass:"bottom8"},[r("el-checkbox",{attrs:{border:""}},[e._v("未完成合同 (8)")])],1),e._v(" "),r("el-dropdown-item",{staticClass:"bottom8"},[r("el-checkbox",{attrs:{border:""}},[e._v("保险资料不完整")])],1),e._v(" "),r("el-dropdown-item",{staticClass:"bottom8"},[r("el-checkbox",{attrs:{border:""}},[e._v("车辆手续不完整")])],1),e._v(" "),r("el-dropdown-item",{staticClass:"bottom8"},[r("el-checkbox",{attrs:{border:""}},[e._v("物流信息不完整")])],1),e._v(" "),r("el-dropdown-item",{staticClass:"bottom8"},[r("el-checkbox",{attrs:{border:""}},[e._v("行驶证信息不完整")])],1)],1)],1)],1),e._v(" "),r("template",{slot:"tableField"},[e.tableProps[0].deleteMulti?r("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),r("el-table-column",{attrs:{align:"center",type:"index",index:e.indexMethod}}),e._v(" "),r("el-table-column",{attrs:{prop:"contract_number",align:"center",label:"合同编号"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"合同类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",{domProps:{innerHTML:e._s(e.$options.filters.filterContractType(t.row.contract_type))}})]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"销售人员",width:"105"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.saler_name))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"客户名称",width:"105"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.nickname))])]}}])}),e._v(" "),-1!=e.tableProps[0].checkedField.indexOf("手机号码")?r("el-table-column",{attrs:{prop:"phone",align:"center",label:"手机号码",width:"110"}}):e._e(),e._v(" "),r("el-table-column",{attrs:{prop:"brand_name",align:"center",label:"品牌名称"}})],1),e._v(" "),r("template",{slot:"action"},[r("el-table-column",{attrs:{align:"center",label:"操作",width:200},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-dropdown",{on:{command:e.handleCommand}},[r("el-button",{staticClass:"pointer",attrs:{type:"primary"}},[r("span",{ref:"actionNode"},[r("i",{staticClass:"el-icon-setting"}),e._v(" 操作选项")]),e._v(" "),r("i",{staticClass:"el-icon-arrow-down el-icon&#45;&#45;right"})]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"preview_"+t.row.id}},[e._v("查看合同")]),e._v(" "),r("el-dropdown-item",{attrs:{command:"upload_"+t.row.id}},[e._v("\n                                资料上传\n                            ")])],1)],1)]}}])})],1)],2),e._v(" "),e.previewVisible?r("ShowContract",{attrs:{isUpdate:!1,id:e.currentId},on:{complete:e.onActionComplete,onContractClose:e.onContractClose}}):e._e()],1)},staticRenderFns:[]};var g=r("vSla")(v,_,!1,function(e){r("CDP9")},"data-v-87c35840",null);t.default=g.exports}});