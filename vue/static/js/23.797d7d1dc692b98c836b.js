webpackJsonp([23],{"9V9O":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("KH7x"),i=o.n(a),r=o("Yyxk"),l=o.n(r),s=o("aA9S"),n=o.n(s),c=o("4YfN"),m=o.n(c),d=o("4YDf"),u=o("ucOY"),f=o("9rMa"),p=o("Du/2"),_=o("TVnW"),v=o("NBJj"),g=o("JuB6"),b=o("8+FI"),h={components:{List:d.a,FormDialog:u.a,ShowContract:v.a,showBudge:g.a},computed:m()({},Object(f.c)(["global"])),filters:n()({},_.a),data:function(){var e=this;return{currentId:"",contacts_id:"",previewVisible:!1,showBudgeVisible:!1,info:{un_examine_count:"",list:[]},activeNames:["1"],searchPros:{keyWord:{isRequire:!1,isNeedInput:!1},searchForm:[{phone:"",status:"",nickname:""}],options:[{value:"",label:"全部"},{value:"0",label:"未操作"},{value:"1",label:"审核通过"},{value:"2",label:"审核失败"}]},formDialog:{recordDetail:{title:"查看明细",titleSalting:!1,form:[],rules:{},onClose:function(t){e.formDialog.recordDetail.visible=!1,e.formDialog.recordDetail.form=[]},submit:function(t){return e.formDialog.recordDetail.visible=!1},visible:!1},audit:{title:"按揭审批",titleSalting:!1,form:[{id:"",status:"",reason:"",money:"",type:"通过",typeOptions:["通过","不通过"]}],rules:{},onClose:function(t){e.formDialog.audit.visible=!1,e.formDialog.audit.form=[{id:"",status:"",reason:"",money:"",type:"通过",typeOptions:["通过","不通过"]}],t&&e.RESPONSE_END({cancelLoadingBtn:!0})},onVerify:function(t){e.LOADING_BTN("");var o=e.formDialog.audit.form[0],a=o.type,i=o.reason,r=o.money;return"不通过"==a&&""==i?(e.formDialog.audit.form[0].status="",void b.a.warningMessage("请输入不通过的原因")):"通过"==a&&""==r?(e.formDialog.audit.form[0].status="",void b.a.warningMessage("请输入通过金额")):"通过"!=a||new RegExp(/^\d+(?=\.{0,1}\d+$|$)/).test(r)?("不通过"==a&&(e.formDialog.audit.form[0].status=2,e.formDialog.audit.form[0].money=""),"通过"==a&&(e.formDialog.audit.form[0].status=1,e.formDialog.audit.form[0].reason=""),console.log(e.formDialog.audit.form[0]),e.LOADING_BTN("formSubmit"),void e.$HTTP.mortgageDoExamine(e.formDialog.audit.form[0]).then(function(t){var o=t.data,a=o.message;o.status;e.LOADING_BTN(""),e.formDialog.audit.onClose(!0),e.$notify({title:""+a,type:"success"})}).catch(function(t){e.LOADING_BTN("")})):(e.formDialog.audit.form[0].status="",e.formDialog.audit.form[0].money="",void b.a.warningMessage("请输入正确的金额"))},submit:function(e){return l()("")},visible:!1}},tableProps:[{tableData:[],currentPage:1,method:"post",getTabData:function(t){return e.$HTTP.mortgageList(t)},operatorWidth:265,operator:[],field:["合同编号","品牌"],fieldMax:3,checkedField:[],checkedFieldCallback:function(t){e.tableProps[0].checkedField=t}}]}},methods:m()({},Object(f.b)([p.a,p.d]),{onActionComplete:function(e){this.$refs["actionNode_"+this.currentId].innerHTML='<i class="el-icon-setting"></i>&nbsp;操作选项',e&&(this.previewVisible=!1,this.showBudgeVisible=!1,this.currentId="",this.contacts_id="")},onContractClose:function(e){this.$refs["actionNode_"+this.currentId].innerHTML='<i class="el-icon-setting"></i>&nbsp;操作选项',this.previewVisible=!1,this.showBudgeVisible=!1,this.currentId="",this.contacts_id="",e&&this.RESPONSE_END("")},handleCommand:function(e){var t=e.split("_"),o=i()(t,2),a=o[0],r=o[1],l="";if(-1!=r.indexOf("-")){var s=r.split("-");r=s[0],l=s[1]}switch(this.currentId=r,a){case"preview":this.previewVisible=!0,this.contacts_id=l,this.$refs["actionNode_"+this.currentId].innerHTML='<i class="el-icon-loading"></i>请稍后...';break;case"income":this.contacts_id=l,this.showBudgeVisible=!0;break;case"approve":this.formDialog.audit.form[0].id=this.currentId,this.formDialog.audit.visible=!0}},withdraw:function(){var e=this;this.$prompt("请输入提现金额，提现收取手续费 3.26%,上级收取10% ","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+(\.\d+)?$/,inputErrorMessage:"请输入正确的金额"}).then(function(t){var o=t.value;o&&e.$HTTP.marketDoWithdraw({apply_money:o}).then(function(e){b.a.notify("申请提现成功提交")}).catch(function(e){})}).catch(function(){})},dataBranch:function(e){console.log("获取到表格数据后的回调"),console.log(e),this.info.un_examine_count=e.un_examine_count,this.info.list=e.list},isDisableExitBtn:function(e){return 0!=e.is_cancel&&3!=e.is_cancel},indexMethod:function(e){return e+1},handRecord:function(e){this.LOADING_BTN("record"),this.formDialog.recordDetail.visible=!0}}),mounted:function(){var e=this;this.$HTTP.globalGetInfo({}).then(function(t){e.userInfo=t.data.data}).catch(function(e){})}},D={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("List",{attrs:{searchPros:e.searchPros,tableProps:e.tableProps,refresh:e.global.refreshTime,response:e.global.responseEnd},on:{dataBranch:e.dataBranch}},[o("el-collapse",{staticStyle:{border:"none"},attrs:{slot:"desc"},slot:"desc",model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[o("el-collapse-item",{attrs:{name:"1"}},[o("template",{slot:"title"},[o("p",{staticStyle:{"border-bottom":"1px solid #ddd"}},[o("i",{staticClass:"header-icon el-icon-info"}),e._v(" 统计")])]),e._v(" "),o("div",{staticClass:"myAccount",staticStyle:{"padding-top":"20px"}},[o("el-badge",{staticClass:"item",attrs:{value:e.info.un_examine_count}},[o("el-button",{attrs:{size:"small"}},[e._v("申请中")])],1)],1)],2)],1),e._v(" "),o("el-breadcrumb",{attrs:{slot:"breadcrumb",separator:"/"},slot:"breadcrumb"},[o("el-breadcrumb-item",[e._v("按揭专员")]),e._v(" "),o("el-breadcrumb-item",[e._v("按揭主页")])],1),e._v(" "),o("template",{slot:"searchContainer"},[o("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"手机号码"},model:{value:e.searchPros.searchForm[0].phone,callback:function(t){e.$set(e.searchPros.searchForm[0],"phone",t)},expression:"searchPros.searchForm[0].phone"}}),e._v(" "),o("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"客户姓名"},model:{value:e.searchPros.searchForm[0].nickname,callback:function(t){e.$set(e.searchPros.searchForm[0],"nickname",t)},expression:"searchPros.searchForm[0].nickname"}}),e._v(" "),o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchPros.searchForm[0].status,callback:function(t){e.$set(e.searchPros.searchForm[0],"status",t)},expression:"searchPros.searchForm[0].status"}},e._l(e.searchPros.options,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),o("template",{slot:"tableField"},[e.tableProps[0].deleteMulti?o("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),o("el-table-column",{attrs:{prop:"saler_name",width:"90",align:"center",label:"销售"}}),e._v(" "),-1!=e.tableProps[0].checkedField.indexOf("合同编号")?o("el-table-column",{attrs:{prop:"contract_number",align:"center",width:"205",label:"合同编号"}}):e._e(),e._v(" "),o("el-table-column",{attrs:{align:"center",width:"120",label:"销售日期"},scopedSlots:e._u([{key:"default",fn:function(t){return o("p",{domProps:{innerHTML:e._s(e.$options.filters.filterDate(t.row.book_time))}})}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"客户名",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(" "+e._s(t.row.nickname))])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"phone",align:"center",label:"手机号码",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(" "+e._s(t.row.phone))])]}}])}),e._v(" "),-1!=e.tableProps[0].checkedField.indexOf("品牌")?o("el-table-column",{attrs:{prop:"brand_name",width:"120",align:"center",label:"品牌"}}):e._e(),e._v(" "),o("el-table-column",{attrs:{prop:"car_model",width:"300",align:"center",label:"车型"}}),e._v(" "),o("el-table-column",{attrs:{prop:"guidance_price",width:"110",align:"center",label:"指导价格"}}),e._v(" "),o("el-table-column",{attrs:{prop:"car_color",width:"100",align:"center",label:"颜色"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",width:"120",label:"合同类型"},scopedSlots:e._u([{key:"default",fn:function(t){return o("p",{domProps:{innerHTML:e._s(e.$options.filters.filterContractType(t.row.contract_type))}})}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",width:"120",label:"当前状态"},scopedSlots:e._u([{key:"default",fn:function(t){return o("p",{},[0==t.row.status?o("span",[o("el-tag",[e._v("默认")])],1):e._e(),e._v(" "),1==t.row.status?o("span",[o("el-tag",{attrs:{type:"success"}},[e._v("审核通过")])],1):e._e(),e._v(" "),2==t.row.status?o("span",[o("el-tag",{attrs:{type:"danger"}},[e._v("审核失败")])],1):e._e()])}}])})],1),e._v(" "),o("template",{slot:"action"},[o("el-table-column",{attrs:{align:"center",label:"操作",width:200},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-dropdown",{on:{command:e.handleCommand}},[o("el-button",{staticClass:"pointer",attrs:{type:"primary"}},[o("span",{ref:"actionNode_"+t.row.id},[o("i",{staticClass:"el-icon-setting"}),e._v(" 操作选项")]),e._v(" "),o("i",{staticClass:"el-icon-arrow-down el-icon&#45;&#45;right"})]),e._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"preview_"+t.row.id+"-"+t.row.contacts_id}},[e._v("\n                                查看合同\n                            ")]),e._v(" "),o("el-dropdown-item",{attrs:{command:"approve_"+t.row.id}},[e._v("\n                                按揭审批\n                            ")])],1)],1)]}}])})],1)],2),e._v(" "),e.formDialog.recordDetail.visible?o("FormDialog",{attrs:{visible:e.formDialog.recordDetail.visible,form:e.formDialog.recordDetail.form,rules:e.formDialog.recordDetail.rules,submitData:e.formDialog.recordDetail.submit,title:e.formDialog.recordDetail.title,titleSalting:e.formDialog.recordDetail.titleSalting},on:{onClose:e.formDialog.recordDetail.onClose}},[o("template",{slot:"formElements"},[o("div",[o("ul",{staticClass:"formList"},[o("li",[o("label",[e._v("合同编号:")]),e._v(" "),o("el-tag",[e._v(e._s(e.formDialog.recordDetail.form[0].contract_number))])],1),e._v(" "),o("li",[o("label",[e._v("销售:")]),e._v(" "),o("el-tag",[e._v(e._s(e.formDialog.recordDetail.form[0].saler_name))])],1),e._v(" "),o("li",[o("label",[e._v("客户名称:")]),e._v(" "),o("el-tag",[e._v(e._s(e.formDialog.recordDetail.form[0].nickname))])],1),e._v(" "),o("li",[o("label",[e._v("品牌:")]),e._v(" "),o("el-tag",[e._v(e._s(e.formDialog.recordDetail.form[0].brand_name))])],1),e._v(" "),o("li",[o("label",[e._v("车型:")]),e._v(" "),o("el-tag",[e._v(e._s(e.formDialog.recordDetail.form[0].car_model))])],1),e._v(" "),o("li",[o("label",[e._v("指导价:")]),e._v(" "),o("el-tag",[e._v(e._s(e.formDialog.recordDetail.form[0].guidance_price))])],1),e._v(" "),o("li",[o("label",[e._v("当前状态:")]),e._v(" "),o("el-tag",[o("span",{domProps:{innerHTML:e._s(e.$options.filters.filterMortgageStatus(e.formDialog.recordDetail.form[0].status))}})])],1),e._v(" "),2==e.formDialog.recordDetail.form[0].status?o("li",{staticStyle:{display:"block"}},[o("label",[e._v("被拒原因:")]),e._v(" "),o("p",{staticStyle:{width:"500px",overflow:"auto",height:"130px","margin-bottom":"20px","padding-bottom":"10px",border:"1px solid #dcdfe6"}},[e._v("\n                            "+e._s(e.formDialog.recordDetail.form[0].false_reason)+"\n                        ")])]):e._e(),e._v(" "),1==e.formDialog.recordDetail.form[0].status?o("li",[o("label",[e._v("通过金额:")]),e._v(" "),o("el-tag",[e._v("\n                            "+e._s(e.$options.filters.filterCNYFormatting(e.formDialog.recordDetail.form[0].money))+"\n                        ")])],1):e._e()])])]),e._v(" "),o("template",{staticStyle:{position:"relative"},slot:"footer"},[o("span",{staticClass:"dialog-footer"},[o("el-button",{on:{click:e.formDialog.recordDetail.onClose}},[e._v("取 消")])],1)])],2):e._e(),e._v(" "),e.showBudgeVisible?o("showBudge",{attrs:{dialogVisible:e.showBudgeVisible,id:e.contacts_id},on:{complete:e.onActionComplete,onContractClose:e.onContractClose}}):e._e(),e._v(" "),e.formDialog.audit.visible?o("FormDialog",{attrs:{visible:e.formDialog.audit.visible,form:e.formDialog.audit.form,rules:e.formDialog.audit.rules,submitData:e.formDialog.audit.submit,title:e.formDialog.audit.title,titleSalting:e.formDialog.audit.titleSalting},on:{onClose:e.formDialog.audit.onClose,onVerify:e.formDialog.audit.onVerify}},[o("template",{slot:"formElements"},[o("el-form-item",{attrs:{label:"请选择",prop:"type"}},[o("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},model:{value:e.formDialog.audit.form[0].type,callback:function(t){e.$set(e.formDialog.audit.form[0],"type",t)},expression:"formDialog.audit.form[0].type"}},e._l(e.formDialog.audit.form[0].typeOptions,function(e,t){return o("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"不通过"==e.formDialog.audit.form[0].type,expression:"formDialog.audit.form[0].type=='不通过'"}],attrs:{prop:"reason",label:"请输入不通过的原因"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.formDialog.audit.form[0].reason,callback:function(t){e.$set(e.formDialog.audit.form[0],"reason",t)},expression:"formDialog.audit.form[0].reason"}})],1),e._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"通过"==e.formDialog.audit.form[0].type,expression:"formDialog.audit.form[0].type=='通过'"}],attrs:{prop:"money",label:"请输入通过金额"}},[o("el-input",{model:{value:e.formDialog.audit.form[0].money,callback:function(t){e.$set(e.formDialog.audit.form[0],"money",t)},expression:"formDialog.audit.form[0].money"}})],1)],1)],2):e._e(),e._v(" "),e.previewVisible?o("ShowContract",{attrs:{id:e.contacts_id,isUpdate:!1},on:{complete:e.onActionComplete,onContractClose:e.onContractClose}}):e._e()],1)},staticRenderFns:[]};var w=o("vSla")(h,D,!1,function(e){o("FGC8")},"data-v-18688c50",null);t.default=w.exports},FGC8:function(e,t){}});