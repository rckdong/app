webpackJsonp([22],{"3rMV":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("KH7x"),a=o.n(r),i=o("Yyxk"),n=o.n(i),l=o("aA9S"),s=o.n(l),c=o("4YfN"),d=o.n(c),p=o("4YDf"),f=o("ucOY"),u=o("8+FI"),m=o("9rMa"),b=o("Du/2"),_=o("TVnW"),g=o("JuB6"),h={components:{List:p.a,FormDialog:f.a,showBudge:g.a},computed:d()({},Object(m.c)(["global"])),filters:s()({},_.a),data:function(){var e=this;return{showBudgeVisible:!1,currentId:"",contacts_id:"",searchPros:{keyWord:{isRequire:!1,isNeedInput:!1},searchForm:[]},formDialog:{operator:{title:'<i class="el-icon-edit"></i>审核',titleSalting:!1,rules:{},form:[{id:"",reason:"",status:"",type:"通过",typeOptions:["通过","不通过"]}],onClose:function(t){e.formDialog.operator.visible=!1,e.formDialog.operator.form=[{id:"",reason:"",status:"",type:"通过",typeOptions:["通过","不通过"]}],t&&e.RESPONSE_END({cancelLoadingBtn:!0})},onVerify:function(t){e.LOADING_BTN("");var o=e.formDialog.operator.form[0],r=o.type,a=o.reason;"不通过"!=r||""!=a?("通过"==r&&(e.formDialog.operator.form[0].status=1,e.formDialog.operator.form[0].reason=""),"不通过"==r&&(e.formDialog.operator.form[0].status=2),e.LOADING_BTN("formSubmit"),e.$HTTP.handlerDoApproval(e.formDialog.operator.form[0]).then(function(t){var o=t.data,r=o.message;o.status;e.LOADING_BTN(""),e.formDialog.operator.onClose(!0),e.$refs["actionNode_"+e.currentId].innerHTML='<i class="el-icon-setting"></i>&nbsp;操作选项',e.$notify({title:""+r,type:"success"}),e.currentId=""}).catch(function(t){e.LOADING_BTN("")})):u.a.warningMessage("请输入不通过的原因")},submit:function(e){return n()("")},visible:!1}},tableProps:[{tableData:[],currentPage:1,method:"post",getTabData:function(t){return e.$HTTP.handlerApprovalList(t)},operatorWidth:203,operator:[],field:["客户","创建时间","手机号码","交车日期/记录","订车日期"],fieldMax:3,checkedField:[],checkedFieldCallback:function(t){return e.tableProps[0].checkedField=t}}]}},methods:d()({},Object(m.b)([b.a,b.d]),{freezeDialog:function(e){this.formDialog.operator.form[0]=s()(this.formDialog.operator.form[0],e),this.formDialog.operator.visible=!0,this.LOADING_BTN("")},indexMethod:function(e){return e+1},handleCommand:function(e){var t=e.split("_"),o=a()(t,2),r=o[0],i=o[1],n="";if(-1!=i.indexOf("-")){var l=i.split("-");i=l[0],n=l[1]}switch(this.currentId=i,this.$refs["actionNode_"+this.currentId].innerHTML='<i class="el-icon-loading"></i>请稍后...',r){case"audit":this.formDialog.operator.form[0].id=i,this.auditDialog();break;case"budget":this.contacts_id=n,this.showBudgeVisible=!0}},auditDialog:function(){this.formDialog.operator.visible=!0,this.$refs["actionNode_"+this.currentId].innerHTML='<i class="el-icon-setting"></i>&nbsp;操作选项'},onActionComplete:function(){this.$refs["actionNode_"+this.currentId].innerHTML='<i class="el-icon-setting"></i>&nbsp;操作选项'},onContractClose:function(e){this.$refs["actionNode_"+this.currentId].innerHTML='<i class="el-icon-setting"></i>&nbsp;操作选项',this.showBudgeVisible=!1,this.currentId="",e&&this.RESPONSE_END("")}})},v={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("List",{attrs:{searchPros:e.searchPros,tableProps:e.tableProps,refresh:e.global.refreshTime,response:e.global.responseEnd}},[o("el-breadcrumb",{attrs:{slot:"breadcrumb",separator:"/"},slot:"breadcrumb"},[o("el-breadcrumb-item",[e._v("销售经理人经理")]),e._v(" "),o("el-breadcrumb-item",[e._v("审批列表")])],1),e._v(" "),o("template",{slot:"tableField"},[e.tableProps[0].deleteMulti?o("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),o("el-table-column",{attrs:{align:"center",type:"index",index:e.indexMethod}}),e._v(" "),o("el-table-column",{attrs:{prop:"contract_number",width:"150",align:"center",label:"合同编号"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"合同类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("p",{domProps:{innerHTML:e._s(e.$options.filters.filterContractType(t.row.contract_type))}})]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",width:"120",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("p",{domProps:{innerHTML:e._s(e.$options.filters.filterApprovalType(t.row.type))}})]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"销售名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("p",[e._v(e._s(t.row.saler_name))])]}}])}),e._v(" "),-1!=e.tableProps[0].checkedField.indexOf("客户")?o("el-table-column",{attrs:{align:"center",label:"客户"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("p",[e._v(e._s(t.row.nickname))])]}}])}):e._e(),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"订车日期",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("p",{domProps:{innerHTML:e._s(e.$options.filters.filterDate(t.row.book_time))}})]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"brand_name",align:"center",label:"品牌名称"}}),e._v(" "),o("el-table-column",{attrs:{prop:"car_model",width:"270",align:"center",label:"车型"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"指导价格",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("p",{domProps:{innerHTML:e._s(e.$options.filters.filterCNYFormatting(t.row.guidance_price))}})]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"成交价",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("p",{domProps:{innerHTML:e._s(e.$options.filters.filterCNYFormatting(t.row.transaction_price))}})]}}])}),e._v(" "),-1!=e.tableProps[0].checkedField.indexOf("创建时间")?o("el-table-column",{attrs:{align:"center",label:"创建时间",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("p",{domProps:{innerHTML:e._s(e.$options.filters.filterDate(t.row.create_at))}})]}}])}):e._e()],1),e._v(" "),o("template",{slot:"action"},[o("el-table-column",{attrs:{align:"center",label:"操作",width:160},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-dropdown",{on:{command:e.handleCommand}},[o("el-button",{staticClass:"pointer",attrs:{type:"primary"}},[o("span",{ref:"actionNode_"+t.row.id},[o("i",{staticClass:"el-icon-setting"}),e._v(" 操作选项")]),e._v(" "),o("i",{staticClass:"el-icon-arrow-down el-icon&#45;&#45;right"})]),e._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"audit_"+t.row.id}},[e._v("审核")]),e._v(" "),o("el-dropdown-item",{attrs:{command:"budget_"+t.row.id+"-"+t.row.contacts_id}},[e._v("查看预算")])],1)],1)]}}])})],1)],2),e._v(" "),o("FormDialog",{attrs:{visible:e.formDialog.operator.visible,form:e.formDialog.operator.form,rules:e.formDialog.operator.rules,submitData:e.formDialog.operator.submit,titleSalting:e.formDialog.operator.titleSalting,title:e.formDialog.operator.title},on:{onClose:e.formDialog.operator.onClose,onVerify:e.formDialog.operator.onVerify}},[o("template",{slot:"formElements"},[o("el-form-item",{attrs:{label:"请选择",prop:"type"}},[o("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},model:{value:e.formDialog.operator.form[0].type,callback:function(t){e.$set(e.formDialog.operator.form[0],"type",t)},expression:"formDialog.operator.form[0].type"}},e._l(e.formDialog.operator.form[0].typeOptions,function(e,t){return o("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"不通过"==e.formDialog.operator.form[0].type,expression:"formDialog.operator.form[0].type=='不通过'"}],attrs:{prop:"reason",label:"请输入不通过的原因"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.formDialog.operator.form[0].reason,callback:function(t){e.$set(e.formDialog.operator.form[0],"reason",t)},expression:"formDialog.operator.form[0].reason"}})],1)],1)],2),e._v(" "),e.showBudgeVisible?o("showBudge",{attrs:{dialogVisible:e.showBudgeVisible,id:e.contacts_id},on:{complete:e.onActionComplete,onContractClose:e.onContractClose}}):e._e()],1)},staticRenderFns:[]};var D=o("vSla")(h,v,!1,function(e){o("Dpd1")},"data-v-19bd6d52",null);t.default=D.exports},Dpd1:function(e,t){}});