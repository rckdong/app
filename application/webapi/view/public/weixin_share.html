<script>
    wx.error(function (err) {
        $.toptip(err.errMsg, 100000, 'error');
    });
    wx.ready(function () {
        wx.onMenuShareTimeline({
            title: '{$share.title|default=""}', // 分享标题
            link: '{:request()->url(true)}', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
            imgUrl: '{$share.img_url|default=""}', // 分享图标
            success: function () {
                // 用户确认分享后执行的回调函数
                var user_share_url = "{:url('webapi/user/user_share')}";
                $.post(user_share_url, function (res) {
                    console.log(res);
                });
            },cancel: function () {
                // 用户取消分享后执行的回调函数
            }
        });
        wx.onMenuShareAppMessage({
            title: '{$share.title|default=""}', // 分享标题
            desc: '{$share.desc|default=""}', // 分享描述
            link: '{:request()->url(true)}', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
            imgUrl: '{$share.img_url|default=""}', // 分享图标
            success: function () {
                // 用户确认分享后执行的回调函数
                var user_share_url = "{:url('webapi/user/user_share')}";
                $.post(user_share_url, function (res) {
                    console.log(res);
                });
            },
            cancel: function () {
                // 用户取消分享后执行的回调函数
            }
        });
        wx.onMenuShareQQ({
            title: '{$share.title|default=""}', // 分享标题
            desc: '{$share.desc|default=""}', // 分享描述
            link: '{:request()->url(true)}', // 分享链接
            imgUrl: '{$share.img_url|default=""}', // 分享图标
            success: function () {
                // 用户确认分享后执行的回调函数
                var user_share_url = "{:url('webapi/user/user_share')}";
                $.post(user_share_url, function (res) {
                    console.log(res);
                });
            },
            cancel: function () {
                // 用户取消分享后执行的回调函数
            }
        });
        wx.onMenuShareWeibo({
            title: '{$share.title|default=""}', // 分享标题
            desc: '{$share.desc|default=""}', // 分享描述
            link: '{:request()->url(true)}', // 分享链接
            imgUrl: '{$share.img_url|default=""}', // 分享图标
            success: function () {
                // 用户确认分享后执行的回调函数
                var user_share_url = "{:url('webapi/user/user_share')}";
                $.post(user_share_url, function (res) {
                    console.log(res);
                });
            },
            cancel: function () {
                // 用户取消分享后执行的回调函数
            }
        });
        wx.onMenuShareQZone({
            title: '{$share.title|default=""}', // 分享标题
            desc: '{$share.desc|default=""}', // 分享描述
            link: '{:request()->url(true)}', // 分享链接
            imgUrl: '{$share.img_url|default=""}', // 分享图标
            success: function () {
                // 用户确认分享后执行的回调函数
                var user_share_url = "{:url('webapi/user/user_share')}";
                $.post(user_share_url, function (res) {
                    console.log(res);
                });
            },
            cancel: function () {
                // 用户取消分享后执行的回调函数
            }
        });
    });
</script>